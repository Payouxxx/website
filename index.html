<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>The Taste Test</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/logo.jpg" rel="icon">
  <link href="assets/img/apple-touch-icon.svg" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">
  <link href="assets/css/ourMark.css" rel="stylesheet">

  <!-- Library -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  	
  <!-- =======================================================
  * Template Name: MyResume - v4.7.0
  * Template URL: https://bootstrapmade.com/free-html-bootstrap-template-my-resume/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Mobile nav toggle button ======= -->
  <!-- <button type="button" class="mobile-nav-toggle d-xl-none"><i class="bi bi-list mobile-nav-toggle"></i></button> -->
  <i class="bi bi-list mobile-nav-toggle d-xl-none"></i>
  <!-- ======= Header ======= -->
  <header id="header" class="d-flex flex-column justify-content-center">

    <nav id="navbar" class="navbar nav-menu">
      <ul>
        <li><a href="#Beer" class="nav-link scrollto active"><i class="bx bx-home"></i> <span>Home</span></a></li>
        <li><a href="#intro" class="nav-link scrollto"><i class="bx bxs-megaphone"></i> <span>Introduction</span></a></li>
        <li><a href="#dataset" class="nav-link scrollto"><i class="bx bx-data"></i> <span>Dataset</span></a></li>
        <li><a href="#facts" class= "nav-link scrollto"><i class="bx bx-bar-chart"></i><span>Numbers</span></a></li>
        <li><a href="#tests" class="nav-link scrollto"><i class="bx bx-bulb"></i> <span>Tests</span></a></li>
        <li><a href="#sentimentAnalysis" class="nav-link scrollto"><i class="bx bx-smile"></i> <span>Sentiment Analysis</span></a></li>
        <li><a href="#beerAspects" class="nav-link scrollto"><i class="bx bxs-beer"></i> <span>Beer Aspects</span></a></li>
        <li><a href="#politicalTendencies" class="nav-link scrollto"><i class="bx bx-map-pin"></i> <span>Political Tendencies</span></a></li>
        <li><a href="#limitations" class="nav-link scrollto"><i class="bx bx-question-mark"></i> <span>Limitations</span></a></li>        
        <li><a href="#conclusion" class="nav-link scrollto"><i class="bx bx-trophy"></i> <span>Conclusion</span></a></li>
        <li><a href="#links" class="nav-link scrollto"><i class="bx bx-link"></i> <span>Links</span></a></li>
      </ul>
    </nav><!-- .nav-menu -->

  </header><!-- End Header -->

  <!-- ======= Beer Section ======= -->
  <section id="Beer" class="d-flex flex-column justify-content-center">
    <div class="container" data-aos="zoom-in" data-aos-delay="100">
      <h1>The taste test : Do local beer come out on Top ?</h1>
      <p>Do Americans <span class="typed" data-typed-items="give better grades to local beers?, political tendencies impact beer reviews?,prefer local?"></span></p>
      <p>
          <small class="ml-3"><b>By:</b></small>
          <small class="ml-3">Thibaut Stoltz,</small>
          <small class="ml-3">Achraf Berrada,</small>
          <small class="ml-3">Claire Payoux,</small>
          <small class="ml-3">Mathis Lettermann</small>
        </p>
        <p style="font-size: 16px">Group: <b>Datalcoholic</B></p>
        <div class="imgMadagascar">
          <a href="https://www.google.com/search?q=youtube+l%27amour+toujours&rlz=1C1CHBF_frCH1013CH1013&oq=youtube+l%27amour+toujours&aqs=chrome..69i57j0i22i30i625l4j0i22i30j0i22i30i625l2j69i64.4325j0j9&sourceid=chrome&ie=UTF-8#fpstate=ive&vld=cid:6c2afd89,vid:w15oWDh02K4" target="_blank">
            <img src="assets/img/Logo_top.jpg">
          </a>
          Press the logo <i class="bx bxs-left-top-arrow-circle" style="font-size: 20px; margin-top: 10px;"></i>
        </div>
    </div>
  </section><!-- End Beer Section -->

  <main id="main">

    <!-- ======= Introduction Section ======= -->
    <section id="intro" class="about smallerWidthDisplay">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>Introduction</h2>
          <p style="text-align: left;">
            Did you know that former President Barack Obama was the first president ever to brew a beer in the White House ? 
            Beer is deeply ingrained in American culture, the US are ranked 15th in beer consumption per capita.
            With the booming craft beer industry, there are now tens of thousands of local breweries throughout the country producing interesting, unique and flavorful beers. 
            With beer reviews, you can learn about the history and backstory of each brewery, as well as the various beers they offer and their flavor profiles. 
            By reading reviews, you can discover which beers are best suited to your particular tastes and which local breweries are worth a visit.
            <br></br>
            There is reason to believe that investigating beer reviews will allow us to understand if American people are more likely to give better grades to local beers. 
            We will also investigate if political tendecies impact beer liking. Our analysis will rely on almost 10 million reviews from 
            worldwide reviews site that we will introduce you in the next section. 
            <br></br>

            <div style="display: flex; margin: auto; width: 85%; margin-bottom: 2em; margin-top: 2em;">
              <div style="width: 60%;height:60% ;margin-top: 1em;">
                <img src="figures/states.jpg" class="img-fluid" alt="">
              </div>
              <div style="width: 80%; text-align: left; margin-left: 1em;">
                <h3>Reviews in the States</h3>
                Taking a closer look to the dataset we observe that there is a total of 5277 breweries. However they do not seem to be the largest ones in the US.
                The 2nd largest brewery in the US in 2021 was <a href="https://www.brewersassociation.org/press-releases/brewers-association-releases-annual-craft-brewing-industry-production-report-and-top-50-producing-craft-brewing-companies-for-2021/" target="_blank">MolsonCoors</a> for instance and  
                we observe that only <b>0.26%</b> of the reviews are made from beers coming out of their breweries. It seems that the dataset gathers more reviews about craft brewed beers 
                and won’t necessarily be representative of all beer drinkers. It's always important to know the bias you are working with. 
              </div>
            </div>
          </p>
        </div>

        <div style="text-align: center; font-size: 100px; margin-top: -1em; margin-bottom: -0.2em;">---</div>

        <div class="row">
          <h3 style="text-align: left; margin-bottom: 1em;">Research questions</h3>
          <div class="questions">
            <p>
              <b>Do American reviwers give better grades to local beers?</b>
              <br><span style="margin-left: 2em">Are some states more represented than others in term of number of reviews ?
              <br><span style="margin-left: 2em">Which part of the grading system is the most important?
              <br><span style="margin-left: 2em">Are reviews more explicits when people liked the beer?
            </p>
            <p>
              <b>How politics tendencies are spread within USA ?  </b>
              <br><span style="margin-left: 2em"> Can we observe a correlation between beer reviews and political tendencies ?
              <br><span style="margin-left: 2em"> Is there a trend over time ?
            </p>
           </div>
          </div>
        </div>
      </div>
    </section><!-- End Introduction Section -->

    <!-- ======= Dataset Section ======= -->
    <section id="dataset" class="about smallerWidthDisplay">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>Where do the reviews come from?</h2>
          <p style="text-align: left;">
            To understand better the data we are working with, we will first introduce you to the data sources. The reviews come from two different 
            websites : <a href="https://www.beeradvocate.com/" target="_blank">Beer Advocate</a> and 
            <a href="https://www.ratebeer.com/" target="_blank">Rate Beer</a> which are the two biggest beer review websites in the world. 
            <br></br> 
            BeerAdvocate and RateBeer provide valuable insights into the world of beer reviews. 
            The datasets contain data on beer ratings, reviews, and other information about beer from users of the sites. 
            This includes information about the type of beer, its style, its region of origin, its ABV, and its ratings from users. 
            Additionally, the datasets also contain information about the user who wrote the review, such as their location, age, and gender.
            The will alow us to analyse how beer reviews influence the perception of a beer. For example, a comparison of ratings and reviews of a particular beer can be used to determine whether users in different regions have different opinions about the same beer.
            Additionally, the datasets can be used to examine how factors such as age, gender, and location affect user opinion.
            Information can be drawn to determine the different types of beers popular in different regions. 
            </p>
        </div>
        <div style="text-align: left;margin-bottom: 1em;"> 
          <h3>Pre-processing</h3>
          For both datasets, we have geographical information about the country of users and breweries. 
          Moreover, for the US based locations, we also have the name of the state. We extracted this information and createed an extra column for both breweries and users 
          containing the US postal abbreviations for each state. We then finished processing the locations by dropping the state name in the location column. By quickly giving a look at the repartition
          of the users location. Some US territories have 1 review each. We therefore removed them from the dataframe since they will not be useful for our analysis.
          We end up with 2 dataframes named <code>BA_US</code> and <code>RB_US</code>. 
          We also converted the <b rating></b> column to a <code>datetime object</code>.
          <br></br> 
          After our processing, we wanted to know the proportion of <code>NaN</code> values for the <b rating></b> and <b text></b> columns in the dataframes.
          If we look at how much these <code>NaN</code> values are represented in the dataframes, we can see that for <code>RB_US</code> the <code>NaN</code> 
          values represent 0.005% of the data and for <code>BA_US</code> they represent 0.6% of the data. Thus we can drop these rows without losing too much information.
          As our story concerns US reviews, we decided to get rid of the reviews made by users not living in the US. 
          <br></br> 
          Comes the time to merge the dataframes. We needed to normalize the data because the distributions are different between the two websites. 
          By following the same procedure as in <a href="https://dlab.epfl.ch/people/west/pub/Lederrey-West_WWW-18.pdf" target="_blank">Lederrey-West paper</a>, thus assuming <quote>that the inherent quality of beers being rated stays roughly constant</quote>,
          we performed a z-score normalization of the ratings. Then merging <code>BA_US</code> and <code>RB_US</code> dataframes using the <code>concat()</code> of <code>pandas</code> is trivial. 
          From now on we have a dataframe called <code>df_ratings</code> to work with.	
        </div>
      </div>
    </section><!-- End Dataset Section -->

    <!-- ======= Facts Section ======= -->
    <section id="facts" class="facts">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>numbers about the data</h2>
        </div>
        <div class="subTitle subTitleOfSection">
          <h2>Find out Meaningful numbers about the reviews</h2>
        </div>

        <div class="row">

          <div class="col-lg-4 col-md-6">
            <div class="count-box">
              <i class="bx bxs-quote-alt-right"></i>
              <span data-purecounter-start="0" data-purecounter-end="9711660" data-purecounter-duration="3" class="purecounter"></span>
              <p>Number of reviews about US beers</p>
            </div>
          </div>

          
          <div class="col-lg-4 col-md-6 mt-5 mt-lg-0">
            <div class="count-box">
              <i class="bx bxs-user"></i>
              <span data-purecounter-start="0" data-purecounter-end="47680" data-purecounter-duration="3" class="purecounter"></span>
              <p>Number of US users that made reviews </p>
            </div>
          </div>

          <div class="col-lg-4 col-md-6 mt-5 mt-md-0">
            <div class="count-box">
              <i class="bx bxs-beer"></i>
              <span data-purecounter-start="0" data-purecounter-end="3464" data-purecounter-duration="3" class="purecounter"></span>
              <p>Number of 5 stars beers in the US</p>
            </div>
          </div>

        </div>
      <div class="container" data-aos="fade-up">
      <div style="margin-bottom: 2em;"></div>

      <div class="subTitle subTitleOfSection">
        <h2>Extract of the reviews</h2>
      </div>

        <div class="testimonials-slider swiper" data-aos="fade-up" data-aos-delay="100">
          <div class="swiper-wrapper">

            <div class="swiper-slide">
              <div class="testimonial-item">
                <p>
                  <i class="bx bxs-quote-alt-left quote-icon-left"></i>
                  Pours a hazy dark brown with huge creamy white head that fades slowly and leaves ample walls of creamy lace.
                  The aroma is of banana bread with a touch of cocoa. The flavor follows the nose, but lacks on banana. 
                  Clove comes out with a touch of cinnamon and cocoa. The feel is creamy and smooth.Delicious and enjoyable. Easy drinking.
                  <i class="bx bxs-quote-alt-right quote-icon-right"></i>
                </p>
              </div>
            </div><!-- End testimonial item -->

            <div class="swiper-slide">
              <div class="testimonial-item">
                <p>
                  <i class="bx bxs-quote-alt-left quote-icon-left"></i>
                  A spicy heffe we have here. Cloudy dark straw colored beer with thin white head that retains constantly throughout the drinking experience. 
                  It leaves nice creamy walls. Beautiful for the style.
                  <i class="bx bxs-quote-alt-right quote-icon-right"></i>
                </p>
              </div>
            </div><!-- End testimonial item -->

            <div class="swiper-slide">
              <div class="testimonial-item">
                <p>
                  <i class="bx bxs-quote-alt-left quote-icon-left"></i>
                  My first dunkel weizen. I was shocked when I realized recently that there was a an entire style of beer available in Alabama that I had never tried. 
                  So, I set out to remedy that oversight and I bought this example from Tucher yesterday at Bruno's and enjoyed it last night.
                  <i class="bx bxs-quote-alt-right quote-icon-right"></i>
                </p>
              </div>
            </div><!-- End testimonial item -->

          </div>
          <div class="swiper-pagination"></div>
        </div>
        <div style="margin-bottom: 4em;"></div>
      </div> 

      <div class="subTitle subTitleOfSection">
        <h2>Most reviewed breweries of the USA</h2>
      </div>
        <div style="margin-bottom: 2em; text-align: left;">
          <div class="row">
            <div class="col-lg-6 pt-4 pt-lg-0 content">
              <p class="normalText" style="font-size: calc(104px/2);"><b>Rogue Ales</b></p>
              <p class="normalText" style="font-size: calc(84px/2);"><b>Miller Brewing Company</b></p>
              <p class="normalText" style="font-size: calc(64px/2);"><b>Anheuser-Busch InBev</b></p>
              <p class="normalText" style="font-size: calc(62px/2);"><b>Brooklyn Brewery</b></p>
              <p class="normalText" style="font-size: calc(30px/1.5);"><b>Boston Beer Company (Samuel Adams)</b></p>
            </div>
            <div class="col-lg-6">
              <iframe width="450" height="615"src="figures/breweries_reviews.html"></iframe>
            </div>
          </div>
          Amongst the top 5 breweries present in the dataframe, we find some wll-known companies such as <b>Anheuser-Busch InBev</b>, 
          but also craft breweries such as <b>Rogue Ales</b> and <b>Brooklyn Brewery</b>.
        </div>

      <div class="subTitle subTitleOfSection">
        <h2>Some more data about the number of reviews related to the location</h2>
      </div>
        <div style="text-align:left; margin-top;: 2em">
          <div class="row">
            <div class="col-lg-6">
              <iframe width="500" height="415"src="figures/states_reviews_beers.html"></iframe>
            </div>
            <div class="col-lg-6">
              <iframe width="500" height="415"src="figures/states_reviews_users.html"></iframe>
            </div>
          </div>
          Comparing the number of reviews made by users from one state, to the number of reviews made about beers from that state, we can see that within the top 10
          of both distributions we find the states of California, Washington, Pensilvania, New York and Massachusetts. Some of them are not surprising as
          they are the states with the highest population. Nonethless, these are valuable insights strenghtening our research question about a possible link between the 
          location of the user and the location of the beer reviewed
        </div>
    </section><!-- End Numbers Section -->

    <!-- ======= Tests Section ======= -->
    <section id="tests" class="about smallerWidthDisplay">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>Foreign or Local ?</h2>
          <p style="text-align: left;">
            To answer our research question : do Americans give better grades to local beers ? Let's perform some tests.
            In a first step we will divide the dataset in 2 : one composed of American reviews on american beers and another one of American reviews on foreign beers.
            Our strategy is to compare the 2 datasets and to apply different statistical tests on them. The null hypothesis of these tests is that both distributions 
            come from the same probability distribution. If the p_value is less than 0.05, then the 2 distributions do not come from the same law and therefore 
            there is an effect: The Americans give grades to American beers.
            <div class="row" style="margin-top: 0em;">
              <div class="col-lg-1"></div>
                <div class="col-lg-10">
                 <iframe width="1100" height="900"src="figures/hist_foreign_US.html"></iframe>
                </div>
              </div>
            </div>
            Here we plotted the number of reviews per grade for each beer aspect for both datasets: 
            <div style ="margin-left: 1em; text-align: left;" ></div>
              <li>Blue: Foreign beers</li>
              <li>Red: Us beers</li>
            </div>
            It seems that the distrubtions are identical. However, one or more statistical tests are necessary to be sure these distributions comes from the same probability law. 
            It should also be noted that the distributions are approximately Gaussian, so we can use a t_test.
            More precisely we will use 2 different static tests <b>(t-test, Wilcoxon test)</b> and calculate their p-values. If this one is lower than 0.05, then the null hypothesis :
            The 2 samples come from the same distribution, will be rejected. We will conclude that there is a general effect that American beers are differently rated by Americans.
            <br></br>
            The <b>Wilcoxon test</b> is a non-parametric statistical test that is used to compare the median of two related or paired samples. 
            The test is based on the Wilcoxon signed-rank test, which is used to compare the medians of two related samples. The test involves calculating the difference between the pairs of observations 
            and then ranking the absolute values of these differences. The test statistic is then calculated based on the sum of the ranks of the positive differences.
            <div style ="margin-left: 1em; text-align: left;" ></div>
              <h2>T-test</h2>
                <b>p-value</b> <span id="tab">0.000000</span><br>
                <b>Pearson's coefficient</b> <span id="tab">0.352315</span><br>
            </div>
          </p>
        </div>
      </div>
    </section>

    <!-- ======= Sentiment Analysis Section ======= -->
    <section id="sentimentAnalysis" class="about smallerWidthDisplay">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>Sentiment analysis</h2>
          <p style="text-align: left;">
            First of all we will investigate if the reviews made by users are positive or negative and if they correspond to the grade given by the user (Rating).
            Sentiment analysis is a method using Natural Language Processing, text analysis and other algorithms to identify, extract, quantify and 
            study the polarity of subjective information in a given text (e.g. a positive or negative opinion). Performing a Sentiment analysis 
            on beer reviews will allow us to see if the reviews tend to be positive or negative. We will use the TextBlob library that uses a natural language toolkit (NLTK). 
            It uses NLTK because it is simple, easy to deploy, will use up fewer resources, gives dependency parsing, and can be used even for small applications.
            When a sentence is passed into Textblob it gives two outputs, which are polarity and subjectivity. Polarity is the output that lies between [-1,1], where -1 refers to 
            negative sentiment and +1 refers to positive sentiment. Subjectivity is the output that lies within [0,1] and refers to personal opinions and judgments.
          </p>

          <div style="text-align: center; width: 80%; margin: auto; margin-top: 1em; margin-bottom: 3em;">
            <i class="bx bxs-quote-alt-left quote-icon-left"></i>
              This too is a great beer! Around Christmas time they release a 3 Litre Bottle! Once bottle is finished you can still bring it into any Stone Brewery and get it refilled!
            <i class="bx bxs-quote-alt-right quote-icon-right"></i>
          </div>

          <div style="text-align: left;">
            This particular review had a sentiment score of: <b>1.0</b>. 
            This is expected as they used the words "great" and "Christmas" which are often used as positive words.
            Also the use of "!" shows that the reviewer is excited about the beer. We can also notice that the quantity
            of the beer is mentioned in a positive way, as the reviewer is excited about the fact that they can get the beer refilled.
            Comparing with the garde they gave to the beer, it shows consistancy as the rating is of 5 stars. 
            Let's investigate the relation between the sentiment score and the rating, to see if there is a correlation.
          </div>

          <div class="row" style="margin-top: 0em;">
            <div class="col-lg-1"></div>
              <div class="col-lg-10">
                <iframe width="800" height= "500" src="figures/boxplot_sentiment_rating.html"></iframe>
              </div>
            </div>
          </div>  
          <div style="text-align: left;margin-bottom: 1em;">
            In this figure, we observe that the distributions of sentiment scores are concentrated around the median, the maximum and the minimum
            are quite close to the median. However, rating scores are more spread across the median, with outliers on both sides. From observational analysis only we 
            can not conclude that there is a correlation between the sentiment score and the rating. We will use a regression analysis to see if there is a correlation as well as 
            statistical tests such as Pearson's correlation coefficient and Spearman's rank correlation coefficient.
          </div>

          <div style="text-align: left;margin-bottom: 1em;"> 
            <h3>Linear Regression</h3>
            For this linear regression we decided to plot the sentiment score, calculated previously, against the rating. We used the statsmodels library to perform the regression analysis.
            The results of the regression analysis are shown below for 6 different beers having at leat 500 reviews (an arbitrary number chosen as the minimum significant number of reviews).
            In the first column we chose 3 beers amongst the top 10 most reviewed beers while in the second column we chose 3 beers with much less reviews and coming from different countries.
            <div style="text-align: center; margin-top: 2em;font-size: large;"> 
              <p>Sentiment score vs Rating</p>
            </div>
            <div style="margin: 0;margin-top: -1.5em;margin-bottom: -1em"> 
              <div class="row">
                <div class="col-lg-6">
                  <iframe width="700" height="700"src="figures/regression_1.html"></iframe>
                </div>
                <div class="col-lg-6">
                  <iframe width="700" height="700"src="figures/regression_2.html"></iframe>
                 </div>
              </div>
            </div>
            The R-squared values are really low, which means that the sentiment score does not explain the variation in the rating. The more the reviews the worse the regression
            model fits the data.
          </div>
          <div style="text-align: left;margin-bottom: 1em;"> 
            <h3>Statistical tests</h3>
            <div style="text-align: left; margin-top: 2em;font-size: large;"> 
              Using the <code>pearsonr</code> function from the <code>scipy.stats</code> library, we can calculate the Pearson's correlation coefficient and the p-value
              for the sentiment score and the rating. 
              <br></br>
              <b>p-value</b> <span id="tab">0.000000</span><br>
              <b>Pearson's coefficient</b> <span id="tab">0.352315</span><br>
              <br></br>
              The p-value is very low, meaning that there is a correlation between the sentiment score and the rating. Which is nuanced
              by the Pearson's coefficient which positive and close to 0.35, therefore the correlation is moderate. The Pearson's correlation test
              assumes that the data is normally distributed, which is not the case here, and a linear relationship betweem the variables. 
              <br></br>
              The assumptions of the Spearman correlation are that data must be ordinal (we can tell without doubt if a value is lower or higher than another).
              We are testing if the data are monotically related (the size of one variable increases as the other variables also increases, 
              or where the size of one variable increases as the other variable also decreases).
              <br></br>
              <b>Spearman's coefficient</b> <span id="tab">0.334857</span><br>
              <br></br>
              We obtained a Spearman coefficient of 0.33, which is close to the Pearson's coefficient. 
              It represents a medium association between the sentiment score and the rating. A positive coefficient indicates that as the rating increases,
              the sentiment score also increases, even if it's a moderate effect.

              <div style="text-align: left;margin-bottom: 1em;margin-top: 1em;"> 
                <h3>And what about local beers ?</h3>
                <div style="text-align: left; margin-top: 2em;font-size: large;"> 
                  To validate (or invalidate) our hypothesis that users from on state prefer beers brewed in the same state, let's perform the same 
                  linear regression than before to see if the sentiment score is more related to the rating as we expect users to be more positive in their reviews.
                </div>
                <div style="text-align: left; margin-top: 2em;font-size: large;"> 
                  <p>Sentiment score vs Rating</p>
                </div>
                <div style="display: flex; margin: auto; width: 85%; margin-bottom: 2em; margin-top: -1em;">
                  <div style="width: 50%;height:80% ;margin-top: 0em;">
                    <iframe width="700" height="700"src="figures/regression_local.html"></iframe>
                  </div>
                  <div style="width: 80%; text-align: left; margin-left: 0em;margin-top: 5em;">
                    The first remark we can make is that the total number of reviews is much lower than the previous regression. This is due to the fact that we only kept the reviews
                    from users from the same state as the brewery. The second remark is that the R-squared value are still very low, 
                    meaning that the linear regressions do not fit the data. 
                    <br></br>
                    Performing the same two tests as before, on every review made by a user on a local beer (relative to its state), we obtain correlation coefficients
                    in the same range as before. The p-value of the Pearson's correlation test is still very low, meaning that there is a correlation between the sentiment score and the rating.
                    <br></br>
                    <b>p-value</b> <span id="tab">0.000000</span><br>
                    <b>Pearson's coefficient</b> <span id="tab">0.367722</span><br>
                    <b>Spearman's coefficient</b> <span id="tab">0.351841</span><br>
                    <br></br>     
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section><!-- End Sentiment Analysis Section -->

    <!-- ======= Beer aspects Section ======= -->

    <!-- ======= Beer aspects Section ======= -->
    <section id="beerAspects" class="about smallerWidthDisplay">
      <div class="container" data-aos="fade-up">
      
        <div class="section-title">
          <h2>Beer Aspects</h2>
          <p style="text-align: left;">
            Reviewers are asked to fill in 5 different grades : 'Aroma', 'Taste', 'Palate', 'Appearance' and 'Overall'. A rating is then done by doing the weighted average 
            of these 5 aspects. In this section we investigate which aspect in 'Aroma', 'Taste', 'Palate' and ‘Appearance' are the most important for the overall score.               This will give us insights on what aspect reviewers tend to prefer in beers.
            To do so we will use 2 different methods to be able to cross check our findings. The first method is a PCA or Principal Component Analysis, the second method is a multi-linear regression. 
              
          <div style="text-align: left;margin-bottom: 1em;"> 
            <h3>Princpal Component Analysis</h3>
            For the PCA, we will use the 4 different aspects as features and ‘overall’ as the target. We use the PCA function from sklearn.decomposition 
            library with 2 components. After fitting the features the to the PCA we extract the explained variance ratios this gives us the following vector : 
            <br>
            <div style="text-align: center; width: 80%; margin: auto; margin-top: 1em; margin-bottom: 3em;">
              <i class="bx bxs-chevron-left"></i>
              <b>0.73276579, 0.12129502</b>
              <i class="bx bxs-chevron-right"></i>
            </div>
            This means the first principal component explains <b>73.3%</b> of the variance and the second <b>12.1%</b>. We finish our PCA analysis by plotting the principal components 1 and 2. 
              <div class="col-lg-6" style="width: 100%; margin-top: 1em; margin-bottom: -7em; align-content: center;">
                <iframe width="600" height="300" src="figures/PCA.html"></iframe>
              </div>
            It seems taste is the most important aspect and appearance the least important. There is almost no difference between aroma and palate thus we cannot conclude 
            much on which one of the two are more important.
          </div>

          <div style="text-align: left;"> 
            <h3>Multilinear Regression</h3>
            We perform a multilinear regression using the sklearn’s LinearRegression function. We apply fit the data to the regression and in order to evaluate the quality of 
            our regression we calculate the coefficient of determination : 0.75, this is considered a good value. Thus, our model should be correct. We now simply get the coefficient of the 
            regression and print the weights we obtain : 
            <div style="text-align: center; width: 80%; margin: auto; margin-top: 1em; margin-bottom: 3em;">
              <i class="bx bxs-chevron-left"></i>
              <b>0.04819957 0.14019966 0.58786571 0.17108195</b>
              <i class="bx bxs-chevron-right"></i>
            </div>
            These correspond respectively to 'appearance','aroma','taste' and 'palate'. As expected the most important is taste and then followed by palate and aroma and behind is the appearance. 
            Due to the close weights of palate and aroma, it is hazardous to state that one is more important than the other. In order to push this a little further, we computed a heat map of the correlation between the different variables.
              <div class="col-lg-6" style="width: 60%; margin: auto;">
                <iframe width="600" height="515"src="figures/corr_matrix.html"></iframe>
              </div>
            As we can see, taste is still the most important and appearance the least however aroma and palate have very similar scores with aroma a bit ahead this time. With this in mind, 
            the only conclusion we can bring out is the fact that taste is most important and appearance the least important.
            Our followup question after finding out that taste is the most important aspect and appearance the least important, is whether there are notable changes for beers with strong taste and beers with mild taste. 
            To do so we chose four beer styles, Pale Lager and American Adjunct Lager as beers with mild taste and Stout and India Pale Ale (IPA) as beers with strong taste.
            We then inspect their scores and plot a heat map of the correlation matrix for each beer style.            
          </div>
            <div style="text-align:left; margin-top;: 2em">
              <div class="row">
                <div class="col-lg-6">
                  <iframe width="500" height="415"src="figures/corr_metrics_AALager.html"></iframe>
                </div>
                <div class="col-lg-6">
                  <iframe width="500" height="415"src="figures/corr_metrics_PL.html"></iframe>
                </div>
                <div class="col-lg-6">
                  <iframe width="500" height="415"src="figures/corr_metrics_IPA.html"></iframe>
                </div>
                <div class="col-lg-6">
                  <iframe width="500" height="415"src="figures/corr_metrics_STOUT.html"></iframe>
                </div>
            </div>
            We see that the two strong beer styles have better grades compared to the two beer styles with a lighter taste. We also see, from the correlation matrices, 
            that the results from our previous correlation matrix are quite similar : taste the most important and appearance the least. Taste tends to be slightly more important for the two lighter beer styles.
            <br></br>
            One more analysis on these four beer styles is plotting the number of reviews and the mean rating of these styles. With the first map, 
            we can see where the reviews for each beer style come from and with the second, the average rating users in the state give to these beer styles. 
            We could interpret these maps in different ways but there doesn’t seem to be any reliable information we could take out from these maps. 
            Our initial objective was to investigate a potential link between the reviews and political tendencies of the reviewers. Even if these maps don’t point out something about 
            a possible link between politics and beer reviews, we will branch out a bit further and see if we find anything interesting.
            <div class="row" style="margin-top: 0em;">
              <div class="col-lg-1"></div>
                <div class="col-lg-10">
                  <iframe width="800" height= "500" src="figures/US_map_1.html"></iframe>
                </div>
              </div>
            </div>  
            <div class="row" style="margin-top: 0em;">
              <div class="col-lg-1"></div>
                <div class="col-lg-10">
                  <iframe width="800" height= "500" src="figures/US_map_2.html"></iframe>
                </div>
              </div>
            </div>  
          </p>
        </div>
      </div>
    </section><!-- End Beer aspects -->
    

    <!-- ======= Political Tendencies Section ======= -->
    <section id="politicalTendencies" class="about smallerWidthDisplay">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>Political Tendencies</h2>
          <p style="text-align: left;">     
            Here, we try to discover if there is a pattern in the reviews of beers based on the political tendencies of the American reviewers. 
            We use our dataset containing statistics of presidential elections in the US during the period from 2000 to 2017, we have the data of the number of votes for each candidate in each state. 
            More precisely we only use the statistics from Democratic and Democratic% parties because they are more than 95% of the votes in each states for each election. 
            Than we want to see if there is a pattern in preferring local beers (brewed in the same state as the reviewer/in the US) to foreign beers (another state of the US/another country).
            We used the dataset scrapped from wikipedia about statistics in presidential elections of 2000 to 2016. 
            <br><br>
            We obviously don't have direct access to the political inclination of the reviewers, but we know the percentage of population that voted for one candidat 
            or the other for each election. We can use this information to estimate political inclination of the reviewers based on their geographical location. 
            If there is a pattern in the preference of local beers we shouls be able to see it in the states where there is a higher percentage of votes for one party or the other. 
            We first need to know the percentages of votes for each party in each states. 
            <br></br>
            We find 6 states where the mean percentage of votes over the 5 elections for the Republican party is higher than 60%: Wyoming, Idaho, Oklahoma, Utah, Alabama and Nebraska.
            There is almost no reviews for beers brewed in these states so we cannot make an analysis at this level of locality. However the numbers are quite balances when we compare reviews 
            from those states of beers brewed in the US and beers brewed in the rest of the world.
            <br><br>
            We already removed the unique review of Washington DC during the pre-processings part. We still find 5 states where the mean percentage of votes over the 5 elections for the Democratic party 
            is Higher than 60% : Hawaii, Massachusetts, New-York, Rhode Island and Vermont. Now we will try to find if there is a pattern in the reviews of beers based on the political tendencies of the American reviewers. 
            For this we can simply separate the reviews in 2 Dataframes for each party : one with the reviews of local beers and one with the reviews of foreign beers. We then perform linear regression 
            to see if there is a correlation on the rating of local vs foreign beers and the political tendency of the reviewers.
            Now that all the data is gathered the linear regression can be performed for the <b>Blue states (Republicans)</b>.
          
            <div style ="margin-left: 1em; text-align: left; margin-bottom: 1em;" >
              <li>WY p-value:  0.05908908717717479 confidence interval:  [-0.13913697  0.00050374]</li>
              <li>OK p-value:  0.7247659726982489 confidence interval:  [-0.07528982 -0.01418895]</li>
              <li>ID p-value:  0.951618871006537 confidence interval:  [-0.07811525 -0.03316912]</li>
              <li>UT p-value:  0.6231749171668464 confidence interval:  [0.08216246 0.16026653]</li>
              <li>NE p-value:  0.2111609862100128 confidence interval:  [-0.14643203 -0.0833191 ]</li>
              <li>AL p-value:  0.037036910800166245 confidence interval:  [-0.08008461 -0.03260173]</li>
            </div>
          <div style ="margin-left: 1em; text-align: left;" >
            The p-values are very high for almost all states but AL. For AL there could be a pattern, looking at the correlation coefficient that is in the bounds of negative confidence intervals, beer ratings in Alabama are more 
            likely to be a bit higher for local beers (brewed in the US) than for foreign beers (brewed in another country). However the p-value is still very high (p > 0.05) for all other strongly republican states so we cannot say 
            that there is a pattern for Republican states in general based on this analysis. Moreover there could be unknown cofounders like the price of the beer or the type of beer that could explain the pattern we see in Alabama.
          </div>
          <br><br>
          <div style ="margin-left: 1em; text-align: left;margin-bottom: 1em;" >
            <li>HI p-value:  0.03618986125294816 confidence interval:  [-0.03887986  0.09044383]]</li>
            <li>MA p-value:  9.713442706946788e-07 confidence interval:  [0.0613177 0.0834096]</li>
            <li>NY p-value:  7.311745691626443e-06 confidence interval:  [0.00766482 0.02497248]</li>
            <li>RI p-value:  0.004618993287231016 confidence interval:  [0.04654619 0.11169225]</li>
            <li>VT p-value:  0.3485235272459348 confidence interval:  [0.01631276 0.07483121]</li>
          </div>
          <div style ="margin-left: 1em; text-align: left;" >
            Here we see that 2 of the highly democratic states (Massashussetts and New-York) have a p-value lower than 0.05. This means that there could be a pattern in the reviews of beers based on the political tendencies of the American reviewers. 
            The correlation coefficient is positive for both states which means that this time, the ratings of foreign beers are higher than the ratings of foreign beers. This seems interesting because democrats are more likely to be more open-minded 
            and open to foreign cultures than republicans that are more conservative. This could explain the pattern we see in the reviews of beers based on the political tendencies of the American reviewers. But there could also be other biases like 
            the price of the beer, the type of beer or other geographical factors that could explain the pattern we see in in those 2 states. Moreover we don't find this pattern in the other highly democratic states (Hawaii, Rhode Island and Vermont) 
            so we cannot say that there is a pattern for Democratic states in general based on this analysis.
          </div>          
          In the end, based on our preliminary results and the p-values, there don't seem to be a pattern beteen higher local ratings and political tendencies in the US. 
        </p>
        </div>
      </div>
    </section><!-- End Political Tendencies Section -->

    <!-- ======= Future Work Section ======= -->
    <section id="futureWork" class="about smallerWidthDisplay">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>Limitations and Future work</h2>
          <p style="text-align: left;">
            Overall we were not able to search for every things we wanted to do at first sight. Here are some of the limitations 
            we faced that restricted us from doing more in the amount of time we had.</br>
            <div style ="margin-left: 1em; text-align: left;" >
              <li>Consumption: one of the main aspect of our research is that the dataset contained only reviews, no consumption information.
                  Even though we searched external datasets about this, we were not able to find a reliable one.</li>
              <li>Time: we were not able to do a lot of things we wanted to do because of the time we had. A part of this point is 
                  that we have not made a lot of researches before the 2nd Milestone and we had to make up for it later.</li>
            </div>
          </p>
          <br>
         </div>
      </div>
    </section><!-- End Future Work Section -->


    <!-- ======= Conclusion Section ======= -->
    <section id="conclusion" class="about smallerWidthDisplay">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>Conclusion</h2>
          <p style="text-align: left;">
            In this study we analyzed 2 large datasets of beer reviews from two well known websites : Rate Beer and Beer Advocate. Our aim in this case study was to discover patterns between the geographical origin of the reviewers and the beers. We had to preprocess the data a bit, especially to adapt the ratings coming from the 2 different websites to use them together in our analysis. As we wanted to discover a correlation between the location of a user and the location of the beer they rated, we performed statistical tests on the “local reviews” and the “foreign local”. We performed sentimental analysis on the data and found that as we could expect, a good sentiment score is correlated with a good rating. Then, looking more precisely about local beers, there is not a higher correlation between high rating and sentiment score for local beers than for all beers globally. In a second time, we wanted to investigate the importance of the different beer aspects. We performed PCA and Multilinear regression. We found that the taste is, in general, the most important aspect of a beer whereas appearance is the least important by far. Finally we wanted to see if we could find some patterns between the political inclination of reviewers and preference for local or foreign beers. We found no clear evidence of those kinds of patterns. 
            <br><br>
            Even if our hypothesis seemed plausible, they do not seem to come to a clear conclusion. Next time let’s just go grab a beer together instead of crushing our heads on such datasets ;)
          </p>
        </div>

      </div>
    </section><!-- Conclusion Section -->

    <!-- ======= Usefull Links Section ======= -->
    <section id="links" class="services smallerWidthDisplay">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>Usefull links</h2>
        </div>

        <div class="row">

          <div class="col-lg-6 col-md-6 d-flex align-items-stretch mt-4 mt-md-0" data-aos="zoom-in" data-aos-delay="200">
            <div class="icon-box iconbox-orange" style="width: 100%">
              <div class="icon">
                <svg width="100" height="100" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">
                  <path stroke="none" stroke-width="0" fill="#f5f5f5" d="M300,582.0697525312426C382.5290701553225,586.8405444964366,449.9789794690241,525.3245884688669,502.5850820975895,461.55621195738473C556.606425686781,396.0723002908107,615.8543463187945,314.28637112970534,586.6730223649479,234.56875336149918C558.9533121215079,158.8439757836574,454.9685369536778,164.00468322053177,381.49747125262974,130.76875717737553C312.15926192815925,99.40240125094834,248.97055460311594,18.661163978235184,179.8680185752513,50.54337015887873C110.5421016452524,82.52863877960104,119.82277516462835,180.83849132639028,109.12597500060166,256.43424936330496C100.08760227029461,320.3096726198365,92.17705696193138,384.0621239912766,124.79988738764834,439.7174275375508C164.83382741302287,508.01625554203684,220.96474134820875,577.5009287672846,300,582.0697525312426"></path>
                </svg>
                <i class="bx bx-code"></i>
              </div>
              <h4><a href="https://github.com/epfl-ada/ada-2022-project-datalcoholic" target="_blank">Our Jupyter Notebook</a></h4>
              <p>This link takes you to our Jupyter Notebook</p>
            </div>
          </div>

          <div class="col-lg-6 col-md-6 d-flex align-items-stretch mt-4 mt-lg-0" data-aos="zoom-in" data-aos-delay="300">
            <div class="icon-box iconbox-pink" style="width: 100%">
              <div class="icon">
                <svg width="100" height="100" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">
                  <path stroke="none" stroke-width="0" fill="#f5f5f5" d="M300,541.5067337569781C382.14930387511276,545.0595476570109,479.8736841581634,548.3450877840088,526.4010558755058,480.5488172755941C571.5218469581645,414.80211281144784,517.5187510058486,332.0715597781072,496.52539010469104,255.14436215662573C477.37192572678356,184.95920475031193,473.57363656557914,105.61284051026155,413.0603344069578,65.22779650032875C343.27470386102294,18.654635553484475,251.2091493199835,5.337323636656869,175.0934190732945,40.62881213300186C97.87086631185822,76.43348514350839,51.98124368387456,156.15599469081315,36.44837278890362,239.84606092416172C21.716077023791087,319.22268207091537,43.775223500013084,401.1760424656574,96.891909868211,461.97329694683043C147.22146801428983,519.5804099606455,223.5754009179313,538.201503339737,300,541.5067337569781"></path>
                </svg>
                <i class="bx bx-globe"></i>
              </div>
              <h4><a href="https://dlab.epfl.ch/teaching/fall2022/cs401/" target="_blank">Course webpage</a></h4>
              <p>This link takes you directly to the course webpage</p>
            </div>
          </div>

        </div>

      </div>
    </section><!-- End Usefull Links -->

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="container">
      <h3>The Taste test</h3>
      <p>Thibaut Stoltz, Achraf Berrada, Claire Payoux and Mathis Lettermann</p>
       <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: [license-url] -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/free-html-bootstrap-template-my-resume/ -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>
  </footer><!-- End Footer -->

  <div id="preloader"></div>
  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/purecounter/purecounter.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/typed.js/typed.min.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>
